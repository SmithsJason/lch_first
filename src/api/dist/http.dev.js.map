{"version":3,"sources":["http.js"],"names":["http","axios","create","baseURL","timeout","headers","interceptors","request","use","config","useUserStore","token","error","Promise","reject","response","data","status","ElMessage","message"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA,IAAMA,IAAI,GAAGC,kBAAMC,MAAN,CAAa;AACxBC,EAAAA,OAAO,EAAE,2BADe;AAExBC,EAAAA,OAAO,EAAE,KAFe;AAGxBC,EAAAA,OAAO,EAAE;AACP,oBAAgB;AADT;AAHe,CAAb,CAAb;;AAQAL,IAAI,CAACM,YAAL,CAAkBC,OAAlB,CAA0BC,GAA1B,CACE,UAACC,MAAD,EAAY;AACV,MAAIC,YAAY,GAAGC,KAAnB,EAA0B;AACxBF,IAAAA,MAAM,CAACJ,OAAP,CAAe,eAAf,cAAqCK,YAAY,GAAGC,KAApD;AACD;;AACD,SAAOF,MAAP;AACD,CANH,EAOE,UAACG,KAAD,EAAW;AACT,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CATH;AAYAZ,IAAI,CAACM,YAAL,CAAkBS,QAAlB,CAA2BP,GAA3B,CACE,UAACO,QAAD,EAAc;AACZ,SAAOA,QAAQ,CAACC,IAAhB;AACD,CAHH,EAIE,UAACJ,KAAD,EAAW;AACT,MAAIA,KAAK,CAACG,QAAV,EAAoB;AAClB,YAAQH,KAAK,CAACG,QAAN,CAAeE,MAAvB;AACE,WAAK,GAAL;AACE;;AACF;AACEC,+BAAUN,KAAV,CAAgBA,KAAK,CAACG,QAAN,CAAeC,IAAf,CAAoBG,OAApB,IAA+B,OAA/C;;AAJJ;AAMD;;AACD,SAAON,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAdH;eAiBeZ,I","sourcesContent":["import axios from 'axios'\r\nimport { ElMessage} from 'element-plus'\r\n\r\nconst http = axios.create({\r\n  baseURL: 'http://localhost:8080/api',\r\n  timeout: 10000,\r\n  headers: {\r\n    \"Content-Type\": \"application/json;charset=utf-8\",\r\n  },\r\n})\r\n\r\nhttp.interceptors.request.use(\r\n  (config) => {\r\n    if (useUserStore().token) {\r\n      config.headers['authorization'] = `${useUserStore().token}`; \r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\nhttp.interceptors.response.use(\r\n  (response) => {\r\n    return response.data\r\n  },\r\n  (error) => {\r\n    if (error.response) {\r\n      switch (error.response.status) {\r\n        case 401:\r\n          break;\r\n        default:\r\n          ElMessage.error(error.response.data.message || '服务器错误')\r\n      }\r\n    }\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\nexport default http\r\n"],"file":"http.dev.js"}